# qix-graphql

> GraphQL Server on top of the Qlik Associative Engine (QIX).

[![CircleCI](https://img.shields.io/circleci/project/github/stefanwalther/qix-graphql.svg)](https://circleci.com/gh/stefanwalther/qix-graphql)
[![codecov](https://codecov.io/gh/stefanwalther/qix-graphql/branch/master/graph/badge.svg)](https://codecov.io/gh/stefanwalther/qix-graphql)

---

## Table of Contents

<details>

- [Motivation](#motivation)
- [Features](#features)
- [Installation](#installation)
- [Usage](#usage)
- [Roadmap](#roadmap)
- [Contribution](#contribution)
- [About](#about)
  * [Author](#author)
  * [License](#license)

_(TOC generated by [verb](https://github.com/verbose/verb) using [markdown-toc](https://github.com/jonschlinkert/markdown-toc))_

</details>

## Motivation

This **prototype** is following the idea of bringing the concept of [GraphQL](https://graphql.org/) together with the powerful Qlik Associative Engine (formerly also called QIX).
The given solution uses the following components:

- Qlik Core - Engine
- A GraphQL server being connected to the Qlik Engine

## Features

The GraphQL server provides two basic different types of endpoints:

**Global Scope:**

- Getting information about one environment (e.g. listing all Qlik apps, etc.)

**App Scope:**

- Connecting to a single Qlik app working with this app, such as
  - Getting the data from an app
  - Being able to query the various tables & fields
  - Making selections
  - Creating on demand hypercubes
  - etc.

## Installation

## From GitHub

First clone the repository:
```
$ git clone https://github.com/stefanwalther/qix-graphql
```

Then run the following command:

```
$ QIX_ENGINE_VER=12.171.0 QIX_ACCEPT_EULA=yes docker-compose up
```
Note: By setting QIX_ACCEPT_EULA to `yes`, you accept the EULA [as described here](https://qlikcore.com/docs/getting-started/).

Then open http://localhost:3004/global/graphql in your browser to get to the GraphQl user interface.

## Usage

### Work with the global scope

Open the GraphiQl UI: http://localhost:3004/global/graphql

Get the list of docs (apps):

```
{
  docs {
    qDocId
    qDocName
    qConnectedUsers
    qFileTime
    qFileSize
    qConnectedUsers
  }
}
```

Retrieve a single doc + links:

```
{
  doc(qDocId: "/docs/Consumer Goods Example.qvf") {
    qDocId
    _links {
      _doc
    }
  }
}
```

Copy the link of _links/_docs to connect to a single app (e.g. [http://localhost:3004/app/%2Fdocs%2FConsumer%20Goods%20Example.qvf/graphql](http://localhost:3004/app/%2Fdocs%2FConsumer%20Goods%20Example.qvf/graphql):

### Work with the app scope

Copying the value of the attribute `_links/_doc`, will give you the link to open another GraphiQl instance, *connecting to this single app*: 

This then allows you to get e.g. all content of a single table.

**Example:**

- Connect to `http://localhost:3004/app/%2Fdocs%2FConsumer%20Goods%20Example.qvf/graphql`
- Then execute the following query to get all data from the `AddressDetails` table:

```
{
  AddressDetails {
    Address_Number
    State
    Customer_Address_1
    Customer_Address_2
    Customer_Address_3
    Customer_Address_4
    Zip_Code
    City
    Country
    QlikPoint
    K
  }
}
```

## Roadmap

I have split the work in a few iterations:

- **Iteration 1: Core prototyping work** **_<== !!! Sorry to say: WE ARE HERE !!!_**
  - Focus on core functionality
  - Testing various ideas/concepts
  - No UI work
  - Little documentation
  - Messy code ;-)
- **Iteration 2: Some work on enhanced concepts**
  - JWT support / Section Access
  - Using multiple engines, using mira 
- **Iteration 3: Getting to a first clean version**
  - Cleaning up / refactoring
  - Automated tests
- **Iteration 4: Clean UI & additional functionality**

See [projects](https://github.com/stefanwalther/qix-graphql/projects) for more details.

## Contribution

Do you like the basic idea of this project? Hopefully!  
I am actively looking for other people who want to join this project ... Please [feel free to reach out to me](https://twitter.com/waltherstefan)

## About

### Author
**Stefan Walther**

* [twitter](http://twitter.com/waltherstefan)  
* [github.com/stefanwalther](http://github.com/stefanwalther) 
* [LinkedIn](https://www.linkedin.com/in/stefanwalther/) 
* [qliksite.io](http://qliksite.io)

### License
MIT

***

_This file was generated by [verb-generate-readme](https://github.com/verbose/verb-generate-readme), v0.6.0, on May 31, 2018._

